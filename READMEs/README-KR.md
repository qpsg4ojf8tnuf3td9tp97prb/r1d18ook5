[English](/README.md) | [한국인](/READMEs/README-KR.md) | [日本語](/READMEs/README-JP.md) | [正體中文](/READMEs/README-CHT.md) | [简体中文](/READMEs/README-CHS.md)

# 리디북스 뷰어 인젝터

이 프로젝트는 Windows용 리디북스 뷰어에 사용자 정의 JavaScript를 삽입하고 패치할 수 있는 도구를 제공합니다. Chrome DevTools의 원격 디버깅 기능을 활용해 다운로드 버튼 삽입 등 내부 뷰어 API에 접근할 수 있도록 합니다.

이 도구는 자신이 소유한 콘텐츠를 추출하거나, Electron 앱의 구조를 배우거나, Chrome DevTools의 기능을 탐색하려는 분들을 위한 것입니다.  
**다만, 정당한 사용 범위 내에서만 사용하시길 바랍니다 (반드시 [법적 고지](#%EF%B8%8F-법적-고지) 및 [`LICENSE`](/LICENSE)를 확인하세요).**

> ⚠️ 이 저장소는 **교육 및 보존 목적**으로만 제공됩니다.  
> ⚠️ 이 도구 사용에 따른 모든 책임은 사용자 본인에게 있습니다.

---

## ⚖️ 법적 고지

**⚠️⚠️⚠️ 반드시 이 섹션을 정독한 후에 사용하세요. ⚠️⚠️⚠️**

이 프로젝트는 일반적인 오픈소스 라이선스가 아닌, **특수한 조건부 라이선스** 하에 배포됩니다 (`LICENSE` 파일 참조). 이 라이선스는 부적절한 사용 시 자동으로 사용 권한을 박탈하는 조항을 포함합니다.

### ✅ 정당한 사용의 예시:
- 본인이 소유하거나 정식으로 접근 권한을 가진 콘텐츠에만 사용
- 유료 장벽(Paywall) 우회, DRM 해제, 불법 콘텐츠 접근 또는 배포 목적이 아님
- 저작권 침해를 조장하거나 기반으로 하는 서비스/도구 제작에 사용하지 않음
- 추출한 콘텐츠 중 보관 권한이 없는 것은 삭제함

### ❌ 부적절한 사용 시:
- **즉시 영구적으로** 이 프로젝트의 사용 권한을 상실합니다
- 작성자의 **현재 및 향후 모든 프로젝트 접근이 영구적으로 차단**됩니다 (예외 없음)
- 부적절한 사용으로 인한 모든 법적 책임은 **전적으로 사용자 본인에게 있음**

허용 여부가 확실하지 않다면: **사용하지 마세요.**

법적·윤리적 테두리 안에서만 완전한 자유를 보장받을 수 있습니다.  
그 경계를 넘는다면, 이 프로젝트는 당신을 보호해주지 않으며, 저 역시 마찬가지입니다.

---

## 🧩 주요 기능

- 완전한 소스 기반 빌드 가능 (Nuitka 사용)
- ...

---

## 🛠️ 사용 방법

0. **Ridibooks 뷰어 다운로드 및 설치** (공식 웹사이트에서):  
   https://getapp.ridibooks.com/windows

1. **`inject.exe` 다운로드**:
   [최신 릴리스](/../../releases/latest).

2. **리디 실행하기**  
   먼저 리디북스를 한 번 실행해서 레지스트리 값을 초기화해야 합니다.

3. **`inject.exe` 실행**  
   리디북스를 원격 디버깅 모드로 실행하고 뷰어에 JavaScript를 삽입합니다.  
   삽입된 스크립트는 다운로드 버튼을 추가합니다.

> 💡 빌드된 실행 파일이 불안하시다면, `src/` 폴더의 Python 소스를 직접 검토하고 직접 실행할 수 있습니다.

---

## ⚠️ 유의 사항

- 이 프로젝트는 **Nuitka**로 빌드되며, 빌드 옵션은 `build.bat`에 정의되어 있습니다.
- 일부 백신 프로그램이 실행 파일을 **오탐지할 수 있습니다.**  
  (PyInstaller나 Nuitka로 빌드한 프로그램에서 자주 발생하는 현상입니다)
- 이 소프트웨어는 **아무런 보증 없이 제공되며**, 모든 책임은 사용자에게 있습니다.
- 본 프로젝트는 오픈소스가 아닌, **소스 접근 허용형 라이선스**입니다.  
  라이선스 조건은 `LICENSE` 파일을 참조하세요.

---

## 🧾 라이선스

이 프로젝트는 전통적인 오픈소스가 아닙니다.  
소스 코드는 개인적인 목적의 수정 및 재배포가 **법적·윤리적으로 정당한 경우에만 허용**됩니다.  
자세한 내용은 [`LICENSE`](/LICENSE)를 반드시 참고하세요.  
보증은 일체 제공되지 않으며, 모든 사용은 본인의 책임 하에 이루어져야 합니다.

---

## 📦 변경 로그

이 프로젝트의 주요 변경 사항은 이 파일에 기록됩니다.

변경 형식은 [Keep a Changelog](https://keepachangelog.com/ko/1.1.0/)  
및 [Semantic Versioning](https://semver.org/lang/ko/)을 따릅니다.

---

### [0.2.0] - 2025-04-28

#### ✨ 추가
- Frida를 통합하여 런타임 JavaScript 인젝션을 지원 (애플리케이션 패치 불필요)
- Electron 개발자 도구를 앱 시작 시 바로 활성화하는 `remote-debugging.js` 추가
- 더 안정적인 프로세스 관리 및 라이프사이클 제어를 위한 psutil 라이브러리 구현
- 로그 수준 및 파일 출력 설정 가능한 구조화된 로깅 시스템 추가
- 네트워크 요청 및 파일 작업에 대한 오류 처리 강화

#### 🛠️ 변경
- 프로세스 처리를 전면적으로 재구성하여 subprocess 및 taskkill 대신 psutil 사용
- JavaScript 인젝션 방식을 코드 직접 삽입에서 사전 로딩 스크립트 파일 사용 방식으로 재구성
- 소설 다운로드 로직을 최적화하여 iframe 콘텐츠 탐색 의존성 제거
- 디버거 연결 관리를 개선하여 재시도 및 복구 메커니즘 강화
- 콘솔 출력 수집을 개선하여 오류, 경고, 로그를 별도로 추적 가능하게 변경

#### 🧹 제거
- DevTools 활성화가 Frida 인젝션 방식으로 변경됨에 따라 patch.py 파일 폐기 및 제거 (패치 불필요화)
- EPUB 다운로드 경로 추출 시 iframe 문서 탐색 의존성 제거
- 특정 상황에서 실패할 수 있는 불안정한 iframe 기반 탐색 방식 제거

---

### [0.1.1] - 2025-04-14

#### ✨ 추가됨
- 프로세스 시작 흐름을 `RidiProcess` 비동기 컨텍스트 매니저로 완전 재작성하여 더 나은 생명주기 제어
- 비동기 로깅 작업 (`_log_process_output`)을 사용한 서브 프로세스 출력 로깅 개선
- `execute_js()` 및 디버거 폴링을 위한 강력한 WebSocket 오류 처리
- 종료 시 남아있는 모든 리디북스 프로세스를 자동 정리 (`terminate_process()`)
- 콘솔 수집기가 경고를 별도로 캡처하며 `__enableConsoleOutput`으로 콘솔 출력 토글 가능

#### 🛠️ 변경됨
- 더 빠른 디버거 감지를 위해 `DebuggerMonitor.polling_interval`을 1.0초에서 0.1초로 변경
- 가독성 향상을 위해 `setup_logger()` 로그 형식을 `[LEVEL] 메시지` 형태로 개선
- `main()`을 재구성하여 리디북스의 깨끗한 시작 및 시작 오류 처리 (EXE 누락, 타임아웃 등) 강화
- 삽입된 JS가 뷰어 iframe 로딩 완료를 보장하기 위해 60 프레임 동안 대기
- 더 나은 타이밍과 안정성을 위해 `inject_to_viewer()` 및 관련 삽입 흐름을 재구성

#### 🧹 제거됨
- 간결한 출력을 위해 이전의 상세 타임스탬프 로그 형식 폐기
- 콘솔 출력이 항상 인쇄되어야 한다는 하드코딩된 가정 제거 (토글 지원 추가)

---

### [0.1.0] - 2025-03-26

#### ✨ 추가됨
- 로그 레벨 및 파일 출력 기능 (`--log-level`, `--log-file`)이 포함된 로깅 시스템
- 향상된 설정을 위한 커맨드라인 인자 파싱 기능
- 디버거 모니터링(`DebuggerMonitor`) 및 프로세스 관리(`RidiProcess`)의 클래스 기반 구조
- WebSocket을 통한 Chrome DevTools 콘솔 출력 수집
- 브라우저 컨텍스트에서 발생한 오류 추적 및 로그 전달 기능
- `terminate_process()` 및 예외 처리 기반 종료 로직을 통한 안전한 프로세스 관리
- 전체적으로 구조화된 로깅 및 정교한 예외 처리 시스템

#### 🛠️ 변경됨
- `inject.py` 완전 리팩토링: 모듈 구조화, 주석 보완, 타입 힌트 추가
- 프로젝트 구조 재정비: 모니터링, 인젝션, 유틸리티 등으로 분리
- 비동기 클래스 및 헬퍼 함수로 기존 로직 재작성
- 예외 처리 강화 및 `websockets.exceptions` 적용을 통한 통신 안정성 향상
- RidiBooks 프로세스의 초기화/재시작 흐름 통합 (`main()`)

#### 🧹 제거됨
- 이전의 글로벌 변수 기반 로직 및 `monitor_debuggers` + `inject_to_viewer` 루프
- 출력 캡처 없는 직접적인 프로세스 실행 호출
- 모호한 예외 처리 및 불안정한 조건문 제거

---

### [OLDVERSION] - ?

#### 추가됨
- 리디북스 JavaScript 인젝션을 위한 `inject.py` 초기 구현
- Chrome DevTools Protocol 기반 런타임 평가 기능
- 레지스트리를 통한 리디북스 설치 경로 자동 감지
- 디버그 포트 할당 및 모니터링 루프 구현

---

## 🙏 감사의 말

우리 주변의 도구를 탐구하고 해부하며 재해석하는 모든 분들께 감사드립니다.  
이 프로젝트는 규칙을 깨기 위한 것이 아니라, 그 규칙을 더 잘 이해하기 위한 것입니다.

[리디북스 뷰어](https://ridibooks.com)를 개발한 모든 분들께 감사드립니다.  
배울 가치가 있는 플랫폼을 만들어주셨습니다.

또한, [Nuitka](https://nuitka.net), [websockets](https://websockets.readthedocs.io/)  
같은 핵심 도구를 개발해주신 모든 분들께도 깊은 감사의 마음을 전합니다.

그리고 이 프로젝트를 완성할 수 있도록 영감을 준,  
익명을 원하지만 나와 같은 생각을 가진 그 사람에게도.

이 프로젝트는 호기심과 경계에 대한 존중, 그리고  
“만약 이렇게 해보면 어떨까?”라는 상상력에서 시작됐습니다.
