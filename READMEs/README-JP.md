[English](/README.md) | [한국인](/READMEs/README-KR.md) | [日本語](/READMEs/README-JP.md) | [正體中文](/READMEs/README-CHT.md) | [简体中文](/READMEs/README-CHS.md)

# Ridibooks Viewer Injector

このプロジェクトは、Windows版 Ridibooks Viewer にカスタム JavaScript を注入できるツール群を提供します。Chrome DevTools のリモートデバッグ機能を利用することで、ダウンロードボタンの追加など、内部APIへのアクセスが可能になります。

あなたが所有しているコンテンツを取り出したい場合や、Electron アプリの仕組みを学びたい場合、あるいは Chrome DevTools の可能性を探ってみたい場合——このプロジェクトはそのために存在します。**ただし、正しく使うことが前提です（[法的注意事項](#%EF%B8%8F-法的注意事項)と [`LICENSE`](/LICENSE) を必ず確認してください）**

> ⚠️ 本リポジトリは**教育的・保存目的のためだけに**提供されています。  
> ⚠️ このツールの使用に関する結果はすべて、利用者自身の責任となります。

---

## ⚖️ 法的注意事項

**⚠️⚠️⚠️このプロジェクトを使用する前に、必ずこのセクションをお読みください⚠️⚠️⚠️**

本プロジェクトは特別なライセンス（`LICENSE`を参照）に基づいて配布されています。**適切に使用する場合のみ有効**であり、誤用があった場合にはライセンスは自動的に無効化されます。

### ✅ 適切な使用例：
- 所有権がある、または正式な許可を得たコンテンツに対して使用している
- ペイウォールやDRMの回避、著作物の不正入手・配布などを行わない
- 違法行為を助長・依存するようなツールやサービスの構築を行わない
- 許可されていない抽出データはすみやかに削除する

### ❌ 不適切な使用を行うと：
- **本プロジェクトの利用権を即時かつ永久に失います**
- **著者の現在および将来の全プロジェクトへのアクセスが禁止されます**（例外なし、再許可なし）
- **すべての責任は利用者に帰属します**

使用が適切かどうか判断できない場合：**使用しないでください**

法的・倫理的に問題がなければ、あなたは完全な自由を持っています。  
そうでないなら——このプロジェクトはあなたのためのものではありません。  
あなたを守ることはできませんし、私もそのつもりはありません。

---

## 🧩 主な機能

- ソースコードから完全に再構築可能（Nuitka 使用）
- ...

---

## 🛠️ 使用手順

1. **Ridibooks Viewer を公式サイトからインストール**  
   https://getapp.ridibooks.com/windows

2. **`patch.exe` を実行**  
   Ridibooks アプリで開発者ツールを有効化します。  
   元に戻すには、インストール先の `/resources` フォルダにある `app.asar` を削除し、`app.asar.bak` を `app.asar` にリネームしてください。

3. **Ridibooksを起動する**  
   最初にRidibooksを一度起動して、レジストリの値を初期化する必要があります。

4. **`inject.exe` を実行**  
   Ridibooks をリモートデバッグモードで起動し、JavaScript をビューアに注入します。ダウンロードボタンが追加されます。

> 💡 ビルド済みの実行ファイルが不安な方は、`src/` 以下の Python ソースコードを監査・確認し、直接実行することも可能です。

---

## ⚠️ 注意事項

- このプロジェクトは **Nuitka** を使ってビルドされています。ビルド設定は `build.bat` に記述されています。
- 一部のウイルス対策ソフトが**誤検知**する場合があります（PyInstaller や Nuitka でビルドされたバイナリではよくあることです）。必要に応じてホワイトリストに追加してください。
- ソフトウェアは**現状のまま（as-is）**提供されており、**いかなる保証もありません**。
- **ソースコードは公開**されていますが、法律的な理由から一般的なオープンソースとは異なります。詳細は `LICENSE` をご確認ください。

---

## 🧾 ライセンス

このプロジェクトは一般的なオープンソースではありません。  
コードの個人利用・修正・再配布は、あなたの使用が法律および倫理に照らして適正である場合に**限り**認められます。詳細は [`LICENSE`](/LICENSE) を参照してください。

一切の保証はなく、**自己責任でご利用ください。**

---

## 📦 更新履歴

本プロジェクトの主な更新内容は、このファイルに記録されています。

形式は [Keep a Changelog](https://keepachangelog.com/ja/1.1.0/) に基づき、  
バージョン管理は [Semantic Versioning](https://semver.org/lang/ja/) を採用しています。

---

### [0.1.0] - 2025-03-26

#### ✨ 新機能
- ログレベル指定＆ファイル出力に対応したログシステム（`--log-level`, `--log-file`）
- 柔軟な設定が可能なコマンドライン引数の導入
- デバッガ監視 (`DebuggerMonitor`) とプロセス管理 (`RidiProcess`) のクラス設計
- WebSocket経由で Chrome DevTools のコンソール出力を取得
- 注入された JavaScript 側のエラー追跡とログ転送
- プロセス終了処理とフォールバックによる安全な管理
- 全体的にリッチなエラーハンドリングと構造的ログ出力に刷新

#### 🛠️ 変更点
- `inject.py` を完全に再構成し、明確な構造と型注釈、ドキュメントを追加
- 監視・注入・ユーティリティの機能を整理しプロジェクトを再構成
- 雑なロジックを非同期クラス・ヘルパーで再実装
- WebSocket通信の堅牢性を向上（例外処理強化）
- 起動・再起動時の `main()` 処理を統一

#### 🧹 削除
- 旧式のグローバルロジックと密結合な `monitor_debuggers` + `inject_to_viewer` 処理
- 出力を取得しないプロセス呼び出し
- 曖昧なエラーハンドリングと危険な条件分岐

---

### [OLDVERSION] - ?

#### 追加
- `inject.py` の初期実装（Ridibooks に JavaScript を注入）
- Chrome DevTools Protocol を利用した実行時評価の簡易サポート
- レジストリ経由で Ridibooks のインストールパスを自動検出
- デバッグポートの割り当てと監視ループ

---

## 🙏 謝辞

ツールを壊すためではなく、より深く理解するために探求し、分解し、再構築する皆さまに感謝します。

また、学ぶ価値のあるプラットフォームを築き上げてくださった  
[Ridibooks Viewer](https://ridibooks.com) の開発者の皆さま、  
そして [Nuitka](https://nuitka.net) および [websockets](https://websockets.readthedocs.io/) の制作者の皆さまにも、心より感謝申し上げます。

さらに、このプロジェクトを磨くきっかけを与えてくれた、匿名のままでいたいという  
ある方にも——本当にありがとう。

このプロジェクトは、「境界を守りつつ、もしもを考える」  
そんな好奇心と敬意のもとで生まれました。
